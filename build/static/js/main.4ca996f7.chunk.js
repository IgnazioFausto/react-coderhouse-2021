(this["webpackJsonpmi-huertita-app"]=this["webpackJsonpmi-huertita-app"]||[]).push([[0],{108:function(e,t,n){"use strict";n.r(t);var c,a,i,r,s,o=n(3),l=n.n(o),j=n(30),d=n.n(j),b=n(5),u=n(17),m=n(9),O=n(49),x=(n(57),O.a.initializeApp({apiKey:"AIzaSyCTV6vswVrZQjbi6NaCheCeanGITRx7-NE",authDomain:"mi-huertapp.firebaseapp.com",projectId:"mi-huertapp",storageBucket:"mi-huertapp.appspot.com",messagingSenderId:"639868948893",appId:"1:639868948893:web:092717bc92534dc8a85f74"})),h=function(){return O.a.firestore(x)},f=n(116),g=n(16),p=n(27),v=n(28),C=Object(v.a)(f.a)(c||(c=Object(p.a)(["\n    background-color:white;\n    width: 14rem;\n    min-width: 10rem;\n    height:auto;\n    margin:1rem auto;\n    align-items:center;\n    text-align:center;\n"]))),N=Object(v.a)(f.a.Title)(a||(a=Object(p.a)(["\n    color:#D63C10;\n    margin:0 auto;\n    font-size:2rem;\n    font-family: 'Raleway', sans-serif;\n    font-weight: 900;\n"]))),y=n(110),k=Object(v.a)(y.a)(i||(i=Object(p.a)(["\n    margin:auto .5rem;\n    background-color:#E97333;\n    border: 2px solid #B4B242;\n    font-family:'Raleway', sans-serif;\n    font-weight:900;\n    &:hover {\n        background-color: #4C5064;\n        border: 2px solid #4C5064;\n  }\n"]))),w=n(111),S=n(41),E=v.a.p(r||(r=Object(p.a)(["\n    font-family:'Raleway', sans-serif;\n    font-weight:900;\n    font-size:1.2rem;\n    padding: .5rem auto;\n    margin: 1rem 1rem;\n    text-align:center;\n"]))),I=n(4),T=function(e){var t=e.id,n=e.name,c=e.precio,a=e.img;return Object(I.jsxs)(C,{className:"p-3",children:[Object(I.jsxs)(f.a.Body,{children:[Object(I.jsx)(S.Img,{style:{width:"100%"},src:a,loader:Object(I.jsx)(w.a,{animation:"border",variant:"success"})}),Object(I.jsx)(N,{children:n}),Object(I.jsxs)(E,{children:["Precio: $",c]})]}),Object(I.jsx)(g.Link,{to:"/detail/".concat(t),children:Object(I.jsx)(k,{children:"Ver producto"})})]})},B=function(e){var t=e.items,n=void 0===t?[]:t;return Object(I.jsx)("div",{className:"row",children:n.map((function(e){return Object(o.createElement)(T,Object(b.a)(Object(b.a)({},e),{},{key:e.id}))}))})},L=(n(84),n.p+"static/media/fruit-vector.974b0ff5.svg"),z=(n(85),function(){return Object(I.jsx)("div",{className:"container",children:Object(I.jsx)("img",{className:"loadIcon",src:L,alt:"Loading"})})}),F=function(){return Object(I.jsx)("div",{className:"loader",children:Object(I.jsx)(z,{})})},A=Object(o.createContext)(),D=function(e){var t=e.children,n=Object(o.useState)(!1),c=Object(u.a)(n,2),a=c[0],i=c[1];return Object(I.jsx)(A.Provider,{value:{loading:a,setLoading:i},children:t})},R=function(){var e=Object(o.useState)([]),t=Object(u.a)(e,2),n=t[0],c=t[1],a=Object(o.useContext)(A),i=a.loading,r=a.setLoading,s=Object(m.m)().categoryId;try{Object(o.useEffect)((function(){r(!0);var e=h().collection("productos");s?e.where("category","==",s).get().then((function(e){var t=e.docs.map((function(e){return Object(b.a)({id:e.id},e.data())}));c(t)})).catch((function(e){return console.log(e)})).finally((function(){r(!1)})):e.get().then((function(e){var t=e.docs.map((function(e){return Object(b.a)({id:e.id},e.data())}));c(t)})).catch((function(e){return console.log(e)})).finally((function(){r(!1)}))}),[s,r])}catch(l){console.log(l)}return Object(I.jsx)("section",{className:"container my-5",children:i?Object(I.jsx)(F,{}):Object(I.jsx)(B,{items:n})})},V=(n(86),n(114)),q=n(112),P=n(115),H=n(66),K=function(){return Object(I.jsx)(H.a,{className:"logo"})},M=n(52),J=n(72),W=Object(o.createContext)(),$=JSON.parse(localStorage.getItem("carrito"))||[],Q=function(e){var t=e.children,n=Object(o.useState)($),c=Object(u.a)(n,2),a=c[0],i=c[1];return Object(o.useEffect)((function(){localStorage.setItem("carrito",JSON.stringify(a))}),[a]),Object(I.jsx)(W.Provider,{value:{cart:a,removeItem:function(e){var t=a.filter((function(t){return t.id!==e}));i(t)},vaciarCarrito:function(){i([])},calcularCantidad:function(){return a.reduce((function(e,t){return e+t.cantidad}),0)},addToCart:function(e){i([].concat(Object(J.a)(a),[e]))},isInCart:function(e){return a.some((function(t){return t.id===e}))},calcularTotal:function(){return a.reduce((function(e,t){return e+t.cantidad*t.precio}),0)}},children:t})},G=function(){var e=Object(o.useContext)(W),t=e.calcularCantidad,n=e.cart;return Object(I.jsx)("div",{children:0===n.length?Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(M.a,{className:"widget"}),Object(I.jsxs)("span",{style:{visibility:0===t()?"hidden":"visible"},children:[t(),"Kg"]})]}):Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(M.a,{className:"widget"}),Object(I.jsxs)("span",{className:"counter",children:[t(),"Kg"]})]})})},Z=function(){return Object(I.jsx)(V.a,{collapseOnSelect:!0,expand:"lg",bg:"dark",variant:"dark",children:Object(I.jsxs)(q.a,{children:[Object(I.jsx)(K,{}),Object(I.jsxs)(g.NavLink,{className:"titulo",exact:!0,to:"/home",children:["Mi Huert",Object(I.jsx)("i",{children:"app"})]}),Object(I.jsx)(V.a.Toggle,{"aria-controls":"responsive-navbar-nav",className:"logo"}),Object(I.jsx)(V.a.Collapse,{id:"responsive-navbar-nav",children:Object(I.jsxs)(P.a,{className:"me-auto nav",children:[Object(I.jsx)(g.NavLink,{className:"linkNav",activeClassName:"linkNavActive",exact:!0,to:"/home",children:"Home"}),Object(I.jsx)(g.NavLink,{className:"linkNav",activeClassName:"linkNavActive",exact:!0,to:"/productos/fruta",children:"Frutas"}),Object(I.jsx)(g.NavLink,{className:"linkNav",activeClassName:"linkNavActive",exact:!0,to:"/productos/verdura",children:"Verduras"}),Object(I.jsx)(g.NavLink,{className:"linkNav",activeClassName:"linkNavActive",exact:!0,to:"/contacto",children:"Contacto"}),Object(I.jsx)(g.NavLink,{className:"linkNav",activeClassName:"linkNavActive",exact:!0,to:"/cart",children:Object(I.jsx)(G,{})})]})})]})})},_=(n(89),n(90),n(43)),U=function(){return Object(I.jsx)(f.a,{style:{width:"80%"},className:"container m-auto mt-5 text-center",children:Object(I.jsxs)(f.a.Body,{children:[Object(I.jsx)(N,{className:"mx-auto my-2",children:"CONTACTO"}),Object(I.jsx)("hr",{}),Object(I.jsx)(E,{style:{fontSize:"1.4rem",padding:" 0 8% "},children:"Ante cualquier sugerencia, consulta o reclamo, puedes contactarnos mediante nuestros canales de atenci\xf3n o redes sociales."}),Object(I.jsx)("br",{}),Object(I.jsxs)(E,{children:[Object(I.jsx)(_.a,{style:{fontSize:"2.5rem",margin:"1rem auto"}}),Object(I.jsx)("br",{})," ",Object(I.jsx)(g.Link,{to:"#",children:"www.facebook.com/mihuertapp"})," "]}),Object(I.jsx)("br",{}),Object(I.jsxs)(E,{children:[Object(I.jsx)(_.c,{style:{fontSize:"2.5rem",margin:"1rem auto"}}),Object(I.jsx)("br",{})," ",Object(I.jsx)(g.Link,{to:"#",children:"www.instagram.com/mihuertapp_ok"})]}),Object(I.jsx)("br",{}),Object(I.jsxs)(E,{children:[Object(I.jsx)(_.b,{style:{fontSize:"2.5rem",margin:"1rem auto"}}),Object(I.jsx)("br",{})," ",Object(I.jsx)(g.Link,{to:"#",children:"mihuertapp-consultas@gmail.com.ar"})]}),Object(I.jsx)("br",{}),Object(I.jsx)("hr",{}),Object(I.jsx)("br",{}),Object(I.jsx)(K,{}),Object(I.jsx)(E,{children:"Mi Huertapp 2021"})]})})},X=Object(v.a)(f.a)(s||(s=Object(p.a)(["\n    background-color:white;\n    width:80%;\n    margin:.5rem auto;\n    justify-content:center;\n    text-align:center\n"]))),Y=function(e){var t=e.quantity,n=e.cantidad,c=e.setCantidad;return Object(I.jsxs)("div",{children:[Object(I.jsxs)("div",{children:["Stock: ",t," kg."]}),Object(I.jsx)("br",{}),Object(I.jsx)("button",{onClick:function(){n>0&&c(n-1)},className:"btn ".concat(0===n?"invisible":"btn-success"),children:" -"}),Object(I.jsxs)("span",{className:"mx-3",children:[n," Kg"]}),Object(I.jsx)("button",{onClick:function(){n<t&&c(n+1)},className:"btn ".concat(n>=t?"invisible":"btn-success"),children:"+"})]})},ee=function(e){var t=e.id,n=e.name,c=e.precio,a=e.img,i=e.description,r=e.category,s=e.quantity,l=Object(m.k)().push,j=Object(o.useState)(0),d=Object(u.a)(j,2),b=d[0],O=d[1],x=Object(o.useContext)(W),h=x.addToCart,p=x.isInCart,v=x.removeItem;return Object(I.jsx)(X,{style:{maxWidth:"50%",height:"100%"},children:Object(I.jsxs)(f.a.Body,{children:[Object(I.jsx)(S.Img,{style:{width:"25%"},src:a,loader:Object(I.jsx)(w.a,{animation:"border",variant:"success"})}),Object(I.jsx)(N,{children:n}),Object(I.jsxs)(E,{children:["Precio: $",c,"/Kg."]}),Object(I.jsx)(E,{children:i}),Object(I.jsx)("hr",{}),p(t)?Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(g.Link,{to:"/cart",className:"btn btn-success mt-3",children:"Termina tu compra"}),Object(I.jsx)("span",{style:{display:"block",margin:"1rem auto"},children:"o si quieres..."})," ",Object(I.jsx)("button",{onClick:function(){return v(t)},className:"btn btn-success mx-3",children:"Elige otra cantidad"})]}):Object(I.jsxs)(I.Fragment,{children:["  ",0===s?Object(I.jsx)(N,{style:{fontSize:"1.5rem",color:"green"},children:"De momento sin stock."}):Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(Y,{quantity:s,cantidad:b,setCantidad:O}),Object(I.jsx)("button",{className:"btn ".concat(0===b?"mt-3 invisible":"mt-3 btn-success"),onClick:function(){b>0&&h({id:t,name:n,precio:c,category:r,cantidad:b,img:a})},children:"Agregar a la cesta"})]})]}),Object(I.jsx)("hr",{}),Object(I.jsxs)("button",{className:"btn btn-outline-success",onClick:function(){return l("/productos/".concat(r))},children:["Ver m\xe1s ",r,"s"]}),Object(I.jsx)("button",{className:"btn btn-outline-success m-2",onClick:function(){return l("/home")},children:"Volver a Home"})]})})},te=function(){var e=Object(o.useState)(null),t=Object(u.a)(e,2),n=t[0],c=t[1],a=Object(m.m)().itemId,i=Object(o.useContext)(A),r=i.loading,s=i.setLoading;return Object(o.useEffect)((function(){s(!0),h().collection("productos").doc(a).get().then((function(e){c(Object(b.a)({id:e.id},e.data())),s(!1)}))}),[a,s]),Object(I.jsx)("div",{children:r?Object(I.jsx)(F,{}):Object(I.jsx)(ee,Object(b.a)({},n))})},ne=function(){var e=Object(m.k)().push;return Object(I.jsx)("div",{className:"container mt-5 text-center",children:Object(I.jsx)(X,{children:Object(I.jsxs)("div",{className:"card-body",children:[Object(I.jsx)(z,{}),Object(I.jsx)(N,{className:"text-center m-2",children:"Cesta vac\xeda : ("}),Object(I.jsx)(k,{onClick:function(){return e("/home")},className:"btn btn-success btn-lg m-3",children:"Ver productos : )"})]})})})},ce=n(53),ae=function(){var e=Object(o.useContext)(W),t=e.cart,n=e.removeItem,c=e.vaciarCarrito,a=e.calcularTotal,i=e.calcularCantidad;return Object(I.jsx)("div",{className:"container text-center",children:Object(I.jsx)(f.a,{style:{maxWidth:"300px",margin:"1rem auto"},children:Object(I.jsxs)("div",{className:"card-body",children:[Object(I.jsx)(E,{style:{width:"100%",fontSize:"2rem",margin:"0 auto",padding:"0"},children:"Resumen de tu compra"}),t.map((function(e,t){return Object(I.jsxs)(f.a,{children:[Object(I.jsx)("hr",{}),Object(I.jsx)("img",{alt:"imagen de producto",style:{width:"6rem",margin:"0 auto"},src:e.img}),Object(I.jsx)(N,{children:e.name}),Object(I.jsxs)(E,{children:[e.cantidad," Kg."]}),Object(I.jsxs)(E,{children:["Precio: $",e.precio*e.cantidad]}),Object(I.jsxs)("button",{className:"btn btn-outline-danger",style:{margin:"0 auto",maxWidth:"12rem"},onClick:function(){return n(e.id)},children:["Quitar de la lista ",Object(I.jsx)(ce.a,{})]}),Object(I.jsxs)(g.Link,{className:"btn btn-outline-success mt-2",style:{margin:"0 auto",maxWidth:"12rem"},to:"/detail/".concat(e.id),onClick:function(){return n(e.id)},children:[Object(I.jsx)(ce.b,{})," Elegir otra cantidad "]})]},t)})),Object(I.jsx)("hr",{}),Object(I.jsxs)(N,{children:["Total a pagar: $",a()]}),Object(I.jsxs)(E,{children:["Total de kilos: ",i()]}),Object(I.jsx)("hr",{}),Object(I.jsx)("button",{className:"btn btn-outline-danger m-2",onClick:c,children:"Vaciar pedido"}),Object(I.jsx)(g.Link,{className:"btn btn-outline-success m-2",to:"/checkout",children:"Finalizar pedido"}),Object(I.jsx)(g.Link,{className:"btn btn-success m-2",to:"/home",children:"Seguir agregando productos"}),Object(I.jsx)("hr",{}),Object(I.jsx)(K,{}),Object(I.jsx)(E,{children:"Mi Huertapp 2021"})]})})})},ie=function(){var e=Object(o.useContext)(W).cart;return Object(I.jsx)("div",{className:"container",children:0===e.length?Object(I.jsx)(I.Fragment,{children:Object(I.jsx)(ne,{})}):Object(I.jsx)(I.Fragment,{children:Object(I.jsx)(ae,{})})})},re=n(20),se=n(32),oe=n.n(se),le=n(113),je=n(54),de=n.n(je),be=n(70),ue=n(55),me=function(){var e=Object(m.k)().push,t=Object(o.useContext)(A),n=t.loading,c=t.setLoading,a=Object(o.useContext)(W),i=a.cart,r=a.calcularTotal,s=a.vaciarCarrito,l=Object(o.useState)({nombre:"",apellido:"",tel:"",email:"",validation:""}),j=Object(u.a)(l,2),d=j[0],O=j[1],x=function(e){O(Object(b.a)(Object(b.a)({},d),{},Object(re.a)({},e.target.name,e.target.value)))};return Object(I.jsxs)(I.Fragment,{children:[0===i.length&&Object(I.jsx)(m.c,{to:"/home"}),Object(I.jsxs)(f.a,{className:"container my-5 mx-auto pb-5 text-center",style:{width:"60%"},children:[Object(I.jsx)(E,{style:{width:"100%",fontSize:"2.5rem",margin:"2rem auto 0 auto",textAlign:"center"},children:"Ingrese sus datos"}),Object(I.jsx)("hr",{}),Object(I.jsxs)("div",{className:"".concat(n,' ? "container mt-3" : "container mt-3 opacity-0"}'),children:[Object(I.jsxs)("form",{style:{width:"10rem",margin:"0 auto"},onSubmit:function(e){return e.preventDefault(),d.nombre.length<3?oe.a.fire({icon:"info",iconColor:"#4C6C14",title:"Debe ingresar su nombre.",confirmButtonText:"Ok",confirmButtonColor:"#E97333"}):d.apellido.length<3?oe.a.fire({icon:"info",iconColor:"#4C6C14",title:"Debe ingresar su apellido.",confirmButtonText:"Ok",confirmButtonColor:"#E97333"}):d.email.length<3?oe.a.fire({icon:"info",iconColor:"#4C6C14",title:"Debe ingresar su email.",confirmButtonText:"Ok",confirmButtonColor:"#E97333"}):d.tel.length<7?oe.a.fire({icon:"info",iconColor:"#4C6C14",title:"Debe ingresar su tel\xe9fono.",confirmButtonText:"Ok",confirmButtonColor:"#E97333"}):void(d.email===d.validation?(c(!0),function(e,t,n){return new Promise(function(){var c=Object(be.a)(de.a.mark((function c(a,i){var r,s,o,l,j,d,u;return de.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return r={buyer:{datos:e},items:t.map((function(e){return{id:e.id,precio:e.precio,cantidad:e.cantidad}})),total:n,date:ue.a.firestore.Timestamp.fromDate(new Date)},s=h(),o=s.collection("orders"),l=s.collection("productos").where(ue.a.firestore.FieldPath.documentId(),"in",t.map((function(e){return e.id}))),c.next=6,l.get();case 6:j=c.sent,d=s.batch(),u=[],j.docs.forEach((function(e){var n=t.find((function(t){return t.id===e.id}));e.data().quantity>=n.cantidad?d.update(e.ref,{quantity:e.data().quantity-n.cantidad}):u.push(Object(b.a)(Object(b.a)({},e.data()),{},{id:e.id}))})),0===u.length?o.add(r).then((function(e){d.commit(),a(e.id)})):i(u);case 11:case"end":return c.stop()}}),c)})));return function(e,t){return c.apply(this,arguments)}}())}(d,i,r()).then((function(e){oe.a.fire({icon:"success",iconColor:"#4C6C14",title:"\xa1Su compra fue registrada!",confirmButtonText:"\xa1Qu\xe9 bien!",confirmButtonColor:"#E97333",text:"Guarde su c\xf3digo de compra ".concat(e),willClose:function(){s()}})})).catch((function(e){oe.a.fire({icon:"error",iconColor:"red",title:"Items sin stock: ".concat(e.map((function(e){return e.name})).join(", ")),text:"Revisa el resumen para comprobar el stock",confirmButtonText:"Ok.",confirmButtonColor:"#E97333"})})).finally((function(){return c(!1)}))):oe.a.fire({icon:"info",iconColor:"#E97333",title:"Validaci\xf3n",text:"Debe ingresar nuevamente su correo",confirmButtonText:"Ok.",confirmButtonColor:"#E97333"}))},children:[Object(I.jsx)("hr",{}),Object(I.jsx)("input",{className:"form-control my-2",type:"text",placeholder:"Nombre",name:"nombre",value:d.nombre,onChange:x}),0===d.nombre.length&&Object(I.jsx)(le.a,{pill:!0,bg:"danger",children:"Este campo es obligatorio"}),Object(I.jsx)("input",{className:"form-control my-2",type:"text",placeholder:"Apellido",name:"apellido",value:d.apellido,onChange:x}),0===d.apellido.length&&Object(I.jsx)(le.a,{pill:!0,bg:"danger",children:"Este campo es obligatorio"}),Object(I.jsx)("input",{className:"form-control my-2",type:"tel",placeholder:"Tel\xe9fono",name:"tel",value:d.tel,onChange:x}),0===d.tel.length&&Object(I.jsx)(le.a,{pill:!0,bg:"danger",children:"Este campo es obligatorio"}),Object(I.jsx)("input",{className:"form-control my-2",type:"email",placeholder:"Email",name:"email",value:d.email,onChange:x}),0===d.email.length&&Object(I.jsx)(le.a,{pill:!0,bg:"danger",children:"Este campo es obligatorio"}),Object(I.jsx)("input",{className:"form-control my-2",type:"text",placeholder:"Confirme su correo",name:"validation",value:d.validation,onChange:x}),0===d.email.length&&Object(I.jsx)(le.a,{pill:!0,bg:"danger",children:"Este campo es obligatorio"}),Object(I.jsx)("hr",{}),Object(I.jsx)("button",{className:"".concat(n," ? btn btn-success m-2 btn-lg btn-block: m-2 invisible}"),disabled:n,type:"submit",children:"Finalizar orden"})]}),Object(I.jsx)("br",{}),Object(I.jsx)("button",{className:"btn btn-outline-success btn-sm mb-2",onClick:function(){return e("/cart")},children:"Revisar el resumen"}),Object(I.jsx)("hr",{}),Object(I.jsx)("br",{}),Object(I.jsx)(K,{}),Object(I.jsx)(E,{children:"Mi Huertapp 2021"})]})]}),n&&Object(I.jsx)(F,{})]})},Oe=n(71),xe=n.n(Oe);var he=function(){return Object(I.jsx)(I.Fragment,{children:Object(I.jsx)(D,{children:Object(I.jsx)(Q,{children:Object(I.jsxs)(g.BrowserRouter,{children:[Object(I.jsx)(Z,{}),Object(I.jsxs)(xe.a,{render:function(e){return e?null:Object(I.jsx)(R,{})},alwaysRender:!0,children:[Object(I.jsx)(m.d,{exact:!0,path:"/home",children:Object(I.jsx)(R,{})}),Object(I.jsx)(m.d,{exact:!0,path:"/contacto",children:Object(I.jsx)(U,{})}),Object(I.jsxs)(m.d,{exact:!0,path:"/productos/:categoryId",children:[" ",Object(I.jsx)(R,{})]}),Object(I.jsxs)(m.d,{exact:!0,path:"/detail/:itemId",children:[" ",Object(I.jsx)(te,{})]}),Object(I.jsx)(m.d,{exact:!0,path:"/cart",children:Object(I.jsx)(ie,{})}),Object(I.jsx)(m.d,{exact:!0,path:"/checkout",children:Object(I.jsx)(me,{})}),Object(I.jsx)(m.d,{path:"*",children:Object(I.jsx)(m.c,{to:"/home"})})]})]})})})})};d.a.render(Object(I.jsx)(l.a.StrictMode,{children:Object(I.jsx)(he,{})}),document.getElementById("root"))},84:function(e,t,n){},85:function(e,t,n){},86:function(e,t,n){},90:function(e,t,n){}},[[108,1,2]]]);
//# sourceMappingURL=main.4ca996f7.chunk.js.map